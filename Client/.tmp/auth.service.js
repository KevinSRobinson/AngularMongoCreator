'use strict';

var cov_2dcp8a9c17 = function () {
    var path = 'C:\\Repos\\NodeMongoAngular\\Client\\src\\auth.service.js',
        hash = '50caa29e126776a121ad3e4851346d877972770b',
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: 'C:\\Repos\\NodeMongoAngular\\Client\\src\\auth.service.js',
        statementMap: {
            '0': {
                start: {
                    line: 1,
                    column: 0
                },
                end: {
                    line: 67,
                    column: 5
                }
            },
            '1': {
                start: {
                    line: 5,
                    column: 4
                },
                end: {
                    line: 7,
                    column: 45
                }
            },
            '2': {
                start: {
                    line: 9,
                    column: 4
                },
                end: {
                    line: 9,
                    column: 56
                }
            },
            '3': {
                start: {
                    line: 12,
                    column: 8
                },
                end: {
                    line: 12,
                    column: 55
                }
            },
            '4': {
                start: {
                    line: 13,
                    column: 8
                },
                end: {
                    line: 13,
                    column: 35
                }
            },
            '5': {
                start: {
                    line: 18,
                    column: 12
                },
                end: {
                    line: 18,
                    column: 59
                }
            },
            '6': {
                start: {
                    line: 19,
                    column: 12
                },
                end: {
                    line: 19,
                    column: 33
                }
            },
            '7': {
                start: {
                    line: 20,
                    column: 12
                },
                end: {
                    line: 20,
                    column: 59
                }
            },
            '8': {
                start: {
                    line: 21,
                    column: 12
                },
                end: {
                    line: 21,
                    column: 24
                }
            },
            '9': {
                start: {
                    line: 27,
                    column: 12
                },
                end: {
                    line: 27,
                    column: 41
                }
            },
            '10': {
                start: {
                    line: 28,
                    column: 12
                },
                end: {
                    line: 28,
                    column: 48
                }
            },
            '11': {
                start: {
                    line: 29,
                    column: 12
                },
                end: {
                    line: 29,
                    column: 47
                }
            },
            '12': {
                start: {
                    line: 30,
                    column: 12
                },
                end: {
                    line: 30,
                    column: 41
                }
            },
            '13': {
                start: {
                    line: 31,
                    column: 12
                },
                end: {
                    line: 31,
                    column: 31
                }
            },
            '14': {
                start: {
                    line: 37,
                    column: 12
                },
                end: {
                    line: 50,
                    column: 15
                }
            },
            '15': {
                start: {
                    line: 38,
                    column: 16
                },
                end: {
                    line: 38,
                    column: 69
                }
            },
            '16': {
                start: {
                    line: 39,
                    column: 16
                },
                end: {
                    line: 39,
                    column: 43
                }
            },
            '17': {
                start: {
                    line: 41,
                    column: 16
                },
                end: {
                    line: 48,
                    column: 19
                }
            },
            '18': {
                start: {
                    line: 42,
                    column: 20
                },
                end: {
                    line: 44,
                    column: 21
                }
            },
            '19': {
                start: {
                    line: 43,
                    column: 24
                },
                end: {
                    line: 43,
                    column: 50
                }
            },
            '20': {
                start: {
                    line: 46,
                    column: 20
                },
                end: {
                    line: 46,
                    column: 77
                }
            },
            '21': {
                start: {
                    line: 47,
                    column: 20
                },
                end: {
                    line: 47,
                    column: 53
                }
            },
            '22': {
                start: {
                    line: 54,
                    column: 15
                },
                end: {
                    line: 54,
                    column: 62
                }
            },
            '23': {
                start: {
                    line: 55,
                    column: 12
                },
                end: {
                    line: 55,
                    column: 46
                }
            },
            '24': {
                start: {
                    line: 56,
                    column: 12
                },
                end: {
                    line: 56,
                    column: 59
                }
            },
            '25': {
                start: {
                    line: 57,
                    column: 12
                },
                end: {
                    line: 57,
                    column: 43
                }
            },
            '26': {
                start: {
                    line: 60,
                    column: 8
                },
                end: {
                    line: 65,
                    column: 9
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 1,
                        column: 1
                    },
                    end: {
                        line: 1,
                        column: 2
                    }
                },
                loc: {
                    start: {
                        line: 1,
                        column: 13
                    },
                    end: {
                        line: 67,
                        column: 1
                    }
                }
            },
            '1': {
                name: 'authService',
                decl: {
                    start: {
                        line: 11,
                        column: 13
                    },
                    end: {
                        line: 11,
                        column: 24
                    }
                },
                loc: {
                    start: {
                        line: 11,
                        column: 48
                    },
                    end: {
                        line: 66,
                        column: 5
                    }
                }
            },
            '2': {
                name: 'login',
                decl: {
                    start: {
                        line: 17,
                        column: 17
                    },
                    end: {
                        line: 17,
                        column: 22
                    }
                },
                loc: {
                    start: {
                        line: 17,
                        column: 25
                    },
                    end: {
                        line: 22,
                        column: 9
                    }
                }
            },
            '3': {
                name: 'logout',
                decl: {
                    start: {
                        line: 26,
                        column: 17
                    },
                    end: {
                        line: 26,
                        column: 23
                    }
                },
                loc: {
                    start: {
                        line: 26,
                        column: 26
                    },
                    end: {
                        line: 32,
                        column: 9
                    }
                }
            },
            '4': {
                name: 'registerAuthenticationListener',
                decl: {
                    start: {
                        line: 36,
                        column: 17
                    },
                    end: {
                        line: 36,
                        column: 47
                    }
                },
                loc: {
                    start: {
                        line: 36,
                        column: 50
                    },
                    end: {
                        line: 51,
                        column: 9
                    }
                }
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 37,
                        column: 37
                    },
                    end: {
                        line: 37,
                        column: 38
                    }
                },
                loc: {
                    start: {
                        line: 37,
                        column: 59
                    },
                    end: {
                        line: 50,
                        column: 13
                    }
                }
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 41,
                        column: 52
                    },
                    end: {
                        line: 41,
                        column: 53
                    }
                },
                loc: {
                    start: {
                        line: 41,
                        column: 78
                    },
                    end: {
                        line: 48,
                        column: 17
                    }
                }
            },
            '7': {
                name: 'getProfileDeferred',
                decl: {
                    start: {
                        line: 53,
                        column: 17
                    },
                    end: {
                        line: 53,
                        column: 35
                    }
                },
                loc: {
                    start: {
                        line: 53,
                        column: 38
                    },
                    end: {
                        line: 58,
                        column: 9
                    }
                }
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 42,
                        column: 20
                    },
                    end: {
                        line: 44,
                        column: 21
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 42,
                        column: 20
                    },
                    end: {
                        line: 44,
                        column: 21
                    }
                }, {
                    start: {
                        line: 42,
                        column: 20
                    },
                    end: {
                        line: 44,
                        column: 21
                    }
                }]
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0
        },
        b: {
            '0': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

++cov_2dcp8a9c17.s[0];
(function () {

    'use strict';

    ++cov_2dcp8a9c17.f[0];
    ++cov_2dcp8a9c17.s[1];
    angular.module('app').service('authService', authService);

    ++cov_2dcp8a9c17.s[2];
    authService.$inject = ['lock', 'authManager', '$q'];

    function authService(lock, authManager, $q) {
        ++cov_2dcp8a9c17.f[1];
        ++cov_2dcp8a9c17.s[3];

        console.log('-------------------------------');
        ++cov_2dcp8a9c17.s[4];
        console.log('authService');

        function login() {
            ++cov_2dcp8a9c17.f[2];
            ++cov_2dcp8a9c17.s[5];

            console.log('-------------------------------');
            ++cov_2dcp8a9c17.s[6];
            console.log('login');
            ++cov_2dcp8a9c17.s[7];
            console.log('-------------------------------');
            ++cov_2dcp8a9c17.s[8];
            lock.show();
        }

        // Logging out just requires removing the user's
        // id_token and profile
        function logout() {
            ++cov_2dcp8a9c17.f[3];
            ++cov_2dcp8a9c17.s[9];

            deferredProfile = $q.defer();
            ++cov_2dcp8a9c17.s[10];
            localStorage.removeItem('id_token');
            ++cov_2dcp8a9c17.s[11];
            localStorage.removeItem('profile');
            ++cov_2dcp8a9c17.s[12];
            authManager.unauthenticate();
            ++cov_2dcp8a9c17.s[13];
            userProfile = null;
        }

        // Set up the logic for when a user authenticates
        // This method is called from app.run.js
        function registerAuthenticationListener() {
            ++cov_2dcp8a9c17.f[4];
            ++cov_2dcp8a9c17.s[14];

            lock.on('authenticated', function (authResult) {
                ++cov_2dcp8a9c17.f[5];
                ++cov_2dcp8a9c17.s[15];

                localStorage.setItem('id_token', authResult.idToken);
                ++cov_2dcp8a9c17.s[16];
                authManager.authenticate();

                ++cov_2dcp8a9c17.s[17];
                lock.getProfile(authResult.idToken, function (error, profile) {
                    ++cov_2dcp8a9c17.f[6];
                    ++cov_2dcp8a9c17.s[18];

                    if (error) {
                        ++cov_2dcp8a9c17.b[0][0];
                        ++cov_2dcp8a9c17.s[19];

                        return console.log(error);
                    } else {
                        ++cov_2dcp8a9c17.b[0][1];
                    }

                    ++cov_2dcp8a9c17.s[20];
                    localStorage.setItem('profile', JSON.stringify(profile));
                    ++cov_2dcp8a9c17.s[21];
                    deferredProfile.resolve(profile);
                });
            });
        }

        function getProfileDeferred() {
            ++cov_2dcp8a9c17.f[7];
            ++cov_2dcp8a9c17.s[22];

            console.log('-------------------------------');
            ++cov_2dcp8a9c17.s[23];
            console.log('getProfileDeferred');
            ++cov_2dcp8a9c17.s[24];
            console.log('-------------------------------');
            ++cov_2dcp8a9c17.s[25];
            return deferredProfile.promise;
        }

        ++cov_2dcp8a9c17.s[26];
        return {
            login: login,
            logout: logout,
            registerAuthenticationListener: registerAuthenticationListener,
            getProfileDeferred: getProfileDeferred
        };
    }
})();